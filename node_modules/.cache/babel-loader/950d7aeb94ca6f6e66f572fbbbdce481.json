{"ast":null,"code":"var _jsxFileName = \"/home/mido/cs/csproj/a5/city-search/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Input, Display } from './components';\n\nconst axios = require('axios');\n\nclass App extends Component {\n  constructor(props) {\n    super(props); //http://ctp-zip-api.herokuapp.com/zip/\n\n    this.updateCity = async val => {\n      //If city nam is empty output an error\n      if (val.length < 1) {\n        console.log(\"No input, City name\");\n        return;\n      }\n\n      const link = this.state.base_link_city.concat(val);\n      await this.updateData(link, 'city');\n    };\n\n    this.updateZip = async val => {\n      //If the zip code is empty or greater than 5 digits\n      // output an error\n      if (val.length < 5 || isNaN(val)) {\n        console.log(\"Please enter a valid zip code\");\n        return;\n      } //concantenate the user submitted zip code to the\n      // link for the API call\n\n\n      const link = this.state.base_link_zip.concat(val);\n      console.log(\"The INPUT ZIP: \", val);\n      await this.updateData(link, 'zip');\n    };\n\n    this.updateData = async (link, field) => {\n      //We can now make the API call, pull the data from the\n      //response and fill our :result: state\n      await axios.get(link).then(response => {\n        //Collect the data from the API call\n        return this.collectData(response);\n      }).then(data => {\n        //data contains an array, each element a result\n        //in the query\n        //If there are no results, log and return\n        if (data.length < 1) {\n          console.log(\"No results\");\n          return;\n        } //can now fill the result array\n        //this.state.fxnRoute[field](data);\n\n\n        console.log(\"The RAW DATA: \", data);\n        console.log(\"The FIELD: \", field);\n        this.fillData(data, field);\n      }).catch(error => {\n        //this.handleSearchError(error);\n        console.log(\"Unable to load data\");\n      });\n    };\n\n    this.fillData = (data, field) => {\n      let items = []; //Cycle through each item and pull data and store\n      // it in the :results: value\n\n      for (let i = 0; i < data.length; i++) {\n        let item = [data[i].LocationText, data[i].Long, data[i].Lat, data[i].EstimatedPopulation];\n        /*\n        this.setState( prevState => ({\n        result: [...prevState.result, item]\n        }));*/\n\n        items.push(item);\n      }\n\n      console.log('1');\n      console.log(\"zip res: \", this.state.results['zip']);\n      console.log(\"city res: \", this.state.results['city']);\n      this.updateResultsState(items, field);\n      console.log('2');\n      console.log(\"zip res: \", this.state.results['zip']);\n      console.log(\"city res: \", this.state.results['city']);\n    };\n\n    this.updateResultsState = async (data, field) => {\n      let fieldObj = Object.assign({}, this.state.results);\n      fieldObj.field = data;\n      await this.setState({\n        fieldObj\n      }, () => {\n        console.log(\"x\");\n      });\n      return;\n    };\n\n    this.collectData = async response => {\n      let data = response.data;\n      return data;\n    };\n\n    this.resetResult = () => {\n      Object.keys(this.state.results).forEach(function (key) {\n        this.state.results[key] = [];\n      });\n    };\n\n    this.state = {\n      fxnRoute: {\n        city: this.updateCity,\n        zip: this.updateZip\n      },\n      results: {\n        zip: [],\n        city: []\n      },\n      base_link_zip: 'http://ctp-zip-api.herokuapp.com/zip/',\n      base_link_city: 'http://ctp-zip-api.herokuapp.com/city/:cityname'\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.results === this.state.results) {\n      console.log(\"no change to fields\");\n      return;\n    }\n\n    console.log('update');\n    console.log(\"zip res: \", this.state.results['zip']);\n    console.log(\"city res: \", this.state.results['city']);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"App-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 3\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"split left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputfield\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      onSubmit: this.updateZip,\n      fieldName: \"Zip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Display, {\n      arr: this.state.results['zip'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 6\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"split right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputfield\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      onSubmit: this.updateCity,\n      fieldName: \"City\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Display, {\n      arr: this.state.results['city'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 6\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/mido/cs/csproj/a5/city-search/src/App.js"],"names":["React","Component","Input","Display","axios","require","App","constructor","props","updateCity","val","length","console","log","link","state","base_link_city","concat","updateData","updateZip","isNaN","base_link_zip","field","get","then","response","collectData","data","fillData","catch","error","items","i","item","LocationText","Long","Lat","EstimatedPopulation","push","results","updateResultsState","fieldObj","Object","assign","setState","resetResult","keys","forEach","key","fxnRoute","city","zip","componentDidUpdate","prevProps","prevState","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\nimport {Input, Display} from './components';\nconst axios = require('axios');\n\nclass App extends Component {\n    constructor(props){\n\tsuper(props);\n\t//http://ctp-zip-api.herokuapp.com/zip/\n\tthis.state = {\n\t    fxnRoute: {city: this.updateCity, zip: this.updateZip},\n\t    results: {zip:[], city:[]},\n\t    base_link_zip: 'http://ctp-zip-api.herokuapp.com/zip/',\n\t    base_link_city: 'http://ctp-zip-api.herokuapp.com/city/:cityname'\n\t};\n    }\n\n    updateCity = async (val) => {\n\t//If city nam is empty output an error\n\tif (val.length < 1) {\n\t    console.log(\"No input, City name\");\n\t    return;\n\t}\n\t\n\tconst link = this.state.base_link_city.concat(val);\n\tawait this.updateData(link, 'city');\n    }\n    \n    updateZip = async (val) => {\n\t//If the zip code is empty or greater than 5 digits\n\t// output an error\n\tif (val.length < 5 || isNaN(val)) {\n\t    console.log(\"Please enter a valid zip code\");\n\t    return;\n\t}\n\n\t//concantenate the user submitted zip code to the\n\t// link for the API call\n\tconst link = this.state.base_link_zip.concat(val);\n\tconsole.log(\"The INPUT ZIP: \", val);\n\tawait this.updateData(link, 'zip');\n    }\n    \n    updateData = async (link, field) => {\n\t//We can now make the API call, pull the data from the\n\t//response and fill our :result: state\n\tawait axios.get(link)\n\t .then( response => {\n\t     //Collect the data from the API call\n\t     return this.collectData(response);\n\t  })\n\t .then( data => {\n\t     //data contains an array, each element a result\n\t     //in the query\n\t     //If there are no results, log and return\n\t     if(data.length < 1) {\n\t \t console.log(\"No results\");\n\t \t return;\n\t     }\n         \n\t     //can now fill the result array\n\t     //this.state.fxnRoute[field](data);\n\t     console.log(\"The RAW DATA: \", data);\n\t     console.log(\"The FIELD: \", field);\n\t     this.fillData(data, field);\n\t })\n\t .catch(error => {\n\t     //this.handleSearchError(error);\n\t     console.log(\"Unable to load data\");\n\t });\t\n    }    \n    \n    \n    //Method for filling the :results: array with\n    //the data corresponding to the location, longitude\n    //latitude, and population.\n    fillData = (data, field) => {\n\tlet items = [];\n\t\n\t//Cycle through each item and pull data and store\n\t// it in the :results: value\n\tfor (let i=0; i < data.length; i++) {\n\t    let item = [data[i].LocationText,\n\t                data[i].Long,\n\t\t\tdata[i].Lat,\n\t\t\tdata[i].EstimatedPopulation];\n\t    /*\n\t    this.setState( prevState => ({\n\t\tresult: [...prevState.result, item]\n\t\t}));*/\n\t    items.push(item);\n\t}\n\tconsole.log('1');\n\tconsole.log(\"zip res: \", this.state.results['zip']);\n\tconsole.log(\"city res: \", this.state.results['city']);\n\tthis.updateResultsState(items, field);\n\tconsole.log('2');\n\tconsole.log(\"zip res: \", this.state.results['zip']);\n\tconsole.log(\"city res: \", this.state.results['city']);\n    }\n\n\n    updateResultsState = async (data, field) => {\n\tlet fieldObj = Object.assign({}, this.state.results);\n\tfieldObj.field = data;\n\tawait this.setState({fieldObj}, ()=> {\n\t    console.log(\"x\");\n\t});\n\treturn;\n    }\n\n    //method for pulling the data value from\n    //the axios payload\n    collectData = async (response) => {\n\tlet data = response.data;\n\treturn data;\n    }\n\n    resetResult = ()=> {\n\tObject.keys(this.state.results).forEach(function(key){ this.state.results[key] = []; });\n    }\n\n    componentDidUpdate(prevProps, prevState){\n\tif (prevState.results === this.state.results){\n\t    console.log(\"no change to fields\");\n\t    return;\n\t}\n\tconsole.log('update');\n\tconsole.log(\"zip res: \", this.state.results['zip']);\n\tconsole.log(\"city res: \", this.state.results['city']);\n\t\n    }\n\n    render(){\n\treturn (\n\t       <div className=\"App\">\n\t\t<header className=\"App-header\">\n\t\t</header>\n\n\t\t<div className=\"split left\">\n\t\t <div className=\"center\">\n\t\t  <div className=\"inputfield\">\n\t           <Input onSubmit={this.updateZip} fieldName='Zip'/>\n   \t\t  </div>\n\t\t  <div className=\"display\">\n\t\t   <Display arr={this.state.results['zip']}/>\n\t\t  </div>\n\t\t </div>\n\t\t</div>\n\n\t    \n\t        <div className=\"split right\">\n\t\t <div className=\"center\">\n\t\t  <div className=\"inputfield\">\n\t           <Input onSubmit={this.updateCity} fieldName='City'/>\n   \t\t  </div>\n\t\t  <div className=\"display\">\n\t\t   <Display arr={this.state.results['city']}/>\n\t\t  </div>\n\t\t </div>\n\t\t</div>\n\n\t       </div>\n\t);\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}